<!doctype html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <title>Withings Authorization Token</title>
   </head>
   <body style="text-align: center;">
      <h1>Your Withings Authorization Token</h1>
      <input size="45" type="text" value="Code placeholder" id="myInput">
      <button onclick="copyToClipboard()">Copy</button>
      <p>You must copy it back to the script during next 30 seconds, otherwise it will get expired.</p>

      <script>
         function getUrlVars() {
             var vars = {};
             var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
                 vars[key] = value;
             });

             return vars;
         }

         function copyToClipboard() {
           /* Get the text field */
           var copyText = document.getElementById("myInput");

           /* Select the text field */
           copyText.select();

           /* Copy the text inside the text field */
           document.execCommand("copy");
         }

         document.getElementById("myInput").value = getUrlVars()["code"];
      </script>
   </body>
</html>
